version: '3.8'

services:
  # =============================================================================
  # Mem0 - Self-hosted memory layer
  # =============================================================================
  # Mem0 provides semantic memory with vector search capabilities
  # Docs: https://docs.mem0.ai/self-hosting

  qdrant:
    image: qdrant/qdrant:latest
    container_name: lifeos-qdrant
    ports:
      - "6333:6333"
      - "6334:6334"
    volumes:
      - qdrant_data:/qdrant/storage
    environment:
      - QDRANT__SERVICE__GRPC_PORT=6334
    restart: unless-stopped

  mem0:
    image: mem0ai/mem0:latest
    container_name: lifeos-mem0
    ports:
      - "8080:8080"
    environment:
      - QDRANT_HOST=qdrant
      - QDRANT_PORT=6333
      # For OpenAI embeddings (default):
      # - OPENAI_API_KEY=${OPENAI_API_KEY}
      # For local embeddings (no external API needed):
      - EMBEDDING_MODEL=local
    depends_on:
      - qdrant
    restart: unless-stopped

volumes:
  qdrant_data:
    driver: local
